<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ecart - Login</title>
  <style>
    :root {
      --bg: #0b1020;
      --panel: #11182a;
      --panel-2: #0e1424;
      --text: #e8eefc;
      --muted: #a9b4ce;
      --primary: #4f8cff;
      --primary-600: #3e73d4;
      --border: #1e2741;
      --accent: #21d4fd;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
      --success: #22c55e;
      --danger: #ff6b6b;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 10% -10%, #183153 0%, transparent 60%),
        radial-gradient(1200px 700px at 110% 10%, #1a2d4f 0%, transparent 60%),
        linear-gradient(180deg, #0a0f1f 0%, #0b1020 100%);
      display: grid; place-items: center; padding: 20px;
    }

    .top-link { position: fixed; top: 12px; left: 12px; }
    .link { padding: 8px 12px; border: 1px solid var(--border); border-radius: 999px; color: var(--muted); background: rgba(255,255,255,0.02); text-decoration: none; font-size: 12px; }

    .login-container { width: 100%; max-width: 400px; background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%); border: 1px solid var(--border); border-radius: 16px; box-shadow: var(--shadow); overflow: hidden; }
    .login-header { padding: 32px 24px 24px; text-align: center; border-bottom: 1px solid var(--border); }
    .logo { width: 60px; height: 60px; border-radius: 16px; background: linear-gradient(135deg, var(--accent) 0%, var(--primary) 70%); box-shadow: 0 12px 32px rgba(79, 140, 255, 0.35); margin: 0 auto 16px; }
    .brand-title { font-size: 28px; font-weight: 800; margin: 0 0 8px; letter-spacing: 0.5px; }
    .brand-subtitle { color: var(--muted); font-size: 14px; margin: 0; }
    .login-body { padding: 24px; }
    .form-group { margin-bottom: 20px; }
    label { display: block; font-size: 12px; color: var(--muted); margin-bottom: 8px; font-weight: 600; letter-spacing: 0.3px; }
    input[type="text"], input[type="password"] { width: 100%; padding: 14px 16px; background: rgba(255, 255, 255, 0.03); border: 1px solid var(--border); border-radius: 12px; color: var(--text); font-size: 16px; outline: none; transition: border-color 0.2s ease, background 0.2s ease, box-shadow 0.2s ease; }
    input::placeholder { color: #7e89a7; }
    input:focus { background: rgba(255, 255, 255, 0.05); border-color: var(--primary); box-shadow: 0 0 0 3px rgba(79, 140, 255, 0.15); }
    .btn { appearance: none; border: 0; padding: 14px 20px; border-radius: 12px; font-weight: 700; font-size: 16px; cursor: pointer; color: white; display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; margin-top: 8px; background: linear-gradient(180deg, var(--primary) 0%, var(--primary-600) 100%); box-shadow: 0 8px 24px rgba(79, 140, 255, 0.25); }
    .btn:disabled { opacity: 0.6; cursor: not-allowed; }

    .demo-accounts { margin-top: 24px; padding: 16px; background: rgba(255, 255, 255, 0.02); border: 1px solid var(--border); border-radius: 12px; }
    .demo-accounts h4 { margin: 0 0 12px; font-size: 14px; color: var(--muted); font-weight: 600; }
    .demo-list { display: grid; gap: 8px; }
    .demo-item { display: flex; align-items: center; justify-content: space-between; padding: 8px 12px; background: rgba(255, 255, 255, 0.02); border: 1px solid var(--border); border-radius: 8px; font-size: 12px; }
    .demo-item button { appearance: none; border: 0; background: transparent; color: var(--primary); cursor: pointer; font-size: 11px; font-weight: 600; padding: 4px 8px; border-radius: 6px; }

    #toast-root { position: fixed; top: 16px; right: 16px; display: grid; gap: 10px; z-index: 2000; }
    .toast { padding: 12px 14px; border-radius: 10px; color: white; font-weight: 600; box-shadow: var(--shadow); border: 1px solid var(--border); animation: toast-in 0.22s ease both; }
    .toast-success { background: linear-gradient(180deg, #23c55e 0%, #16a34a 100%); }
    .toast-error { background: linear-gradient(180deg, #f87171 0%, #ef4444 100%); }
    .toast-info { background: linear-gradient(180deg, var(--primary) 0%, var(--primary-600) 100%); }
    @keyframes toast-in { from { transform: translateY(-6px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  </style>
</head>
<body>
  <a href="index.html" class="link top-link">‚Üê Back</a>
  <div style="position:fixed;top:12px;right:12px;display:inline-flex;gap:8px;">
    <a href="signup.html" class="link">Sign Up</a>
    <a href="products.html" class="link">Products</a>
  </div>
  <div class="login-container">
    <div class="login-header">
      <div class="logo" aria-hidden="true"></div>
      <h1 class="brand-title">Ecart</h1>
      <p class="brand-subtitle">Professional Cart Management System</p>
    </div>

    <div class="login-body">
      <form id="loginForm" onsubmit="handleLogin(event)">
        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" id="username" name="username" placeholder="Enter your username" required autocomplete="username" />
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" name="password" placeholder="Enter your password" required autocomplete="current-password" />
        </div>

        <button type="submit" class="btn" id="loginBtn">Sign In</button>
      </form>

      <div class="demo-accounts">
        <h4>Demo Accounts (Click to auto-fill)</h4>
        <div class="demo-list">
          <div class="demo-item">
            <span><strong>admin</strong> / admin123</span>
            <button onclick="fillDemo('admin', 'admin123')">Use</button>
          </div>
          <div class="demo-item">
            <span><strong>manager</strong> / manager123</span>
            <button onclick="fillDemo('manager', 'manager123')">Use</button>
          </div>
          <div class="demo-item">
            <span><strong>user</strong> / user123</span>
            <button onclick="fillDemo('user', 'user123')">Use</button>
          </div>
        </div>
      </div>

      
    </div>
  </div>

  <div id="toast-root" aria-live="polite" aria-atomic="true"></div>

  <script>
    const validCredentials = { 'admin': 'admin123', 'manager': 'manager123', 'user': 'user123' };
    function loadUsers() {
      try { return JSON.parse(localStorage.getItem('users') || '{}'); } catch { return {}; }
    }
    function saveUsers(users) {
      localStorage.setItem('users', JSON.stringify(users || {}));
    }
    function checkCredentials(username, password) {
      if (validCredentials[username] && validCredentials[username] === password) return true;
      const users = loadUsers();
      return Boolean(users[username] && users[username] === password);
    }

    function showToast(message, type = 'info', timeoutMs = 3000) {
      const root = document.getElementById('toast-root');
      const el = document.createElement('div');
      el.className = `toast toast-${type}`;
      el.textContent = message;
      root.appendChild(el);
      setTimeout(() => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(-4px)';
        setTimeout(() => el.remove(), 180);
      }, timeoutMs);
    }

    function setBusy(buttonEl, busy) { if (!buttonEl) return; buttonEl.disabled = !!busy; buttonEl.textContent = busy ? 'Signing In...' : 'Sign In'; }
    function fillDemo(username, password) { document.getElementById('username').value = username; document.getElementById('password').value = password; showToast(`Demo credentials filled: ${username}`, 'info', 1500); }

    function handleLogin(event) {
      event.preventDefault();
      const loginBtn = document.getElementById('loginBtn');
      setBusy(loginBtn, true);
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value;
      setTimeout(() => {
        if (checkCredentials(username, password)) {
          showToast(`Welcome, ${username}! Redirecting...`, 'success');
          sessionStorage.setItem('authenticated', 'true');
          sessionStorage.setItem('username', username);
          sessionStorage.setItem('loginTime', new Date().toISOString());
          setTimeout(() => { window.location.href = 'cart.html'; }, 1200);
        } else {
          showToast('Invalid username or password', 'error');
          setBusy(loginBtn, false);
        }
      }, 700);
    }

    function registerUser() {
      const u = (document.getElementById('newUsername').value || '').trim();
      const p = document.getElementById('newPassword').value || '';
      if (!u || !p) { showToast('Enter username and password', 'error'); return; }
      if (validCredentials[u]) { showToast('Username reserved', 'error'); return; }
      const users = loadUsers();
      if (users[u]) { showToast('User already exists', 'error'); return; }
      users[u] = p;
      saveUsers(users);
      showToast('Account created. You can sign in now.', 'success');
      document.getElementById('username').value = u;
      document.getElementById('password').value = p;
    }

    if (sessionStorage.getItem('authenticated') === 'true') {
      window.location.href = 'cart.html';
    }
    (function setInitialFocus(){
      try {
        const users = loadUsers();
        const hasAny = users && Object.keys(users).length > 0;
        const target = hasAny ? document.getElementById('username') : document.getElementById('newUsername');
        if (target) target.focus();
      } catch (_) {
        const f = document.getElementById('username');
        if (f) f.focus();
      }
    })();
  </script>
</body>
</html>